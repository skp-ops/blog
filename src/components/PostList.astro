---
import type { CollectionEntry } from 'astro:content'
import PinIcon from '@/assets/icons/pin-icon.svg'
import PostDate from '@/components/PostDate.astro'
import { getPostPath } from '@/i18n/path'
import { getPostDescription } from '@/utils/description'
import { isHomePage } from '@/utils/page'

type Post = CollectionEntry<'posts'> & {
  remarkPluginFrontmatter: {
    minutes: number
  }
}

const { posts, lang, pinned = false } = Astro.props
const isHome = isHomePage(Astro.url.pathname)

export interface Props {
  posts: Post[]
  lang: string
  pinned?: boolean
}
---

<div class="grid grid-cols-1 gap-6">
  {posts.map((post) => {
    const slug = post.data.abbrlink || post.id
    const url = getPostPath(slug, lang)

    return (
      <a
        href={url}
        class="card-base group block rounded-lg p-6 transition-all bg-bg-secondary shadow-md hover:bg-bg-tertiary hover:shadow-xl hover:-translate-y-1"
        data-astro-prefetch
      >
        <article>
          <h2
            class="mb-2 text-xl font-bold transition-colors group-hover:text-accent"
            transition:name={`post-${slug}${lang ? `-${lang}` : ''}`}
            data-disable-theme-transition
          >
            {post.data.title}
          </h2>
          <p class="text-sm opacity-80">
            {getPostDescription(post, 'list')}
          </p>
        </article>
      </a>
    )
  })}
</div>
